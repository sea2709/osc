(function(e){e.wpProQuizFront=function(i,t){function n(){var e=0,i=-1,t=0,n=!1;this.questionStart=function(t){-1!=i&&this.questionStop(),i=t,e=+new Date},this.questionStop=function(){-1!=i&&(h[i].time+=Math.round((new Date-e)/1e3),i=-1)},this.startQuiz=function(){n&&this.stopQuiz(),t=+new Date,n=!0},this.stopQuiz=function(){n&&(quizEndTimer=+new Date,h.comp.quizTime+=Math.round((quizEndTimer-t)/1e3),h.comp.quizEndTimestamp=quizEndTimer,h.comp.quizStartTimestamp=t,n=!1)},this.init=function(){}}function o(i,t,n,o){if("single"==i.type||"multiple"==i.type)o.children().each(function(i){var o=e(this),s=o.attr("data-pos");if(null!=t[s]){var r=t[s];1==r&&(e(".wpProQuiz_questionInput",o).prop("checked","checked"),c.trigger({type:"questionSolved",values:{item:n,index:n.index(),solved:!0}}))}});else if("free_answer"==i.type)o.children().each(function(i){e(this);e(".wpProQuiz_questionInput",this).val(t)}),c.trigger({type:"questionSolved",values:{item:n,index:n.index(),solved:!0}});else if("sort_answer"==i.type)jQuery.each(t,function(i,t){var n=e('li.wpProQuiz_questionListItem[data-pos="'+t+'"]',o),s=e("div.wpProQuiz_sortable",n);e(s).text();jQuery(o).append(n)}),c.trigger({type:"questionSolved",values:{item:n,index:n.index(),solved:!0}});else if("matrix_sort_answer"==i.type)jQuery.each(t,function(i,t){var s=e('.wpProQuiz_matrixSortString .wpProQuiz_sortStringList li[data-pos="'+i+'"]',n),r=e('li.wpProQuiz_questionListItem[data-pos="'+t+'"] ul.wpProQuiz_maxtrixSortCriterion',o);jQuery(s).appendTo(r)}),c.trigger({type:"questionSolved",values:{item:n,index:n.index(),solved:!0}});else if("cloze_answer"==i.type)jQuery('span.wpProQuiz_cloze input[type="text"]',o).each(function(i){void 0!==t[i]&&e(this).val(t[i])}),c.trigger({type:"questionSolved",values:{item:n,index:n.index(),solved:!0}});else if("assessment_answer"==i.type)e('input.wpProQuiz_questionInput[value="'+t+'"]',o).attr("checked","checked"),c.trigger({type:"questionSolved",values:{item:n,index:n.index(),solved:!0}});else if("essay"==i.type)if(o.find("#uploadEssayFile_"+i.id).length){var r=o.find("#uploadEssayFile_"+i.id);e(r).val(t),e("<p>"+s(t)+"</p>").insertAfter(r),c.trigger({type:"questionSolved",values:{item:n,index:n.index(),solved:!0}})}else o.find(".wpProQuiz_questionEssay").length&&(o.find(".wpProQuiz_questionEssay").html(t),c.trigger({type:"questionSolved",values:{item:n,index:n.index(),solved:!0}}))}function s(e){return null!=e?e.split("/").reverse()[0]:""}var r,a,u,d,c=e(i),p=t,l=this,h=new Object,f=new Object,w=0,m=null,_=[],v="",z=!1,Q=1,P=0,g=null,q="",y="",k={randomAnswer:0,randomQuestion:0,disabledAnswerMark:0,checkBeforeStart:0,preview:0,cors:0,isAddAutomatic:0,quizSummeryHide:0,skipButton:0,reviewQustion:0,autoStart:0,forcingQuestionSolve:0,hideQuestionPositionOverview:0,formActivated:0,maxShowQuestion:0,sortCategories:0},x={isQuizStart:0,isLocked:0,loadLock:0,isPrerequisite:0,isUserStartLocked:0},S={check:'input[name="check"]',next:'input[name="next"]',questionList:".wpProQuiz_questionList",skip:'input[name="skip"]',singlePageLeft:'input[name="wpProQuiz_pageLeft"]',singlePageRight:'input[name="wpProQuiz_pageRight"]'},b={back:c.find('input[name="back"]'),next:c.find(S.next),quiz:c.find(".wpProQuiz_quiz"),questionList:c.find(".wpProQuiz_list"),results:c.find(".wpProQuiz_results"),sending:c.find(".wpProQuiz_sending"),quizStartPage:c.find(".wpProQuiz_text"),timelimit:c.find(".wpProQuiz_time_limit"),toplistShowInButton:c.find(".wpProQuiz_toplistShowInButton"),listItems:e()},I={token:"",isUser:0},T={START:0,END:1},L=(r=p.timelimit,a=0,u={},d="ldadv-time-limit-"+p.user_id+"-"+p.quizId,u.stop=function(){r&&(e.removeCookie(d),window.clearInterval(a),b.timelimit.hide())},u.start=function(){if(r){e.cookie.raw=!0;var i=1e3*r,t=e.cookie(d),n=t||r,o=1e3*n,s=b.timelimit.find("span").text(l.methode.parseTime(n)),c=b.timelimit.find(".wpProQuiz_progress");b.timelimit.show();var p=+new Date;a=window.setInterval(function(){var n=+new Date-p,r=o-n;n>=500&&(t=r/1e3,s.text(l.methode.parseTime(Math.ceil(t))),e.cookie(d,t)),c.css("width",r/i*100+"%"),r<=0&&(u.stop(),l.methode.finishQuiz(!0))},16)}},u),j=new function(){function i(e){var i=u.eq(e),t=i.offset().top,n=s.offset().top,o=t-n;if(o-4<0||o+32>100){var d=n-u.eq(0).offset().top-(n-a.offset().top)+i.position().top;d>w&&(d=w);var c=d/h;a.attr("style","margin-top: "+-d+"px !important"),r.css({top:c})}}function t(e){var i="",t=m[e];t.solved?i="wpProQuiz_reviewQuestionSolved":t.review&&(i="wpProQuiz_reviewQuestionReview"),u.eq(e).removeClass("wpProQuiz_reviewQuestionSolved"),u.eq(e).removeClass("wpProQuiz_reviewQuestionReview"),""!=i&&u.eq(e).addClass(i)}function n(e){e.preventDefault();var i=e.pageY-p;i<0&&(i=0),i>d&&(i=d);var t=h*i;a.attr("style","margin-top: "+-t+"px !important"),r.css({top:i})}function o(i){i.preventDefault(),e(document).unbind(".scrollEvent")}var s=[],r=[],a=[],u=[],d=0,p=0,h=0,f=0,w=0,m=[];this.init=function(){s=c.find(".wpProQuiz_reviewQuestion"),r=s.find("div"),a=s.find("ol"),u=a.children(),r.mousedown(function(i){i.preventDefault(),i.stopPropagation(),p=i.pageY-r.offset().top+f,e(document).bind("mouseup.scrollEvent",o),e(document).bind("mousemove.scrollEvent",n)}),u.click(function(i){l.methode.showQuestion(e(this).index())}),c.bind("questionSolved",function(e){m[e.values.index].solved=e.values.solved,t(e.values.index)}),c.bind("changeQuestion",function(e){u.removeClass("wpProQuiz_reviewQuestionTarget"),u.eq(e.values.index).addClass("wpProQuiz_reviewQuestionTarget"),i(e.values.index)}),c.bind("reviewQuestion",function(e){m[e.values.index].review=!m[e.values.index].review,t(e.values.index)}),s.bind("mousewheel DOMMouseScroll",function(e){e.preventDefault();var i=e.originalEvent,t=i.wheelDelta?-i.wheelDelta/120:i.detail/3,n=20*t,o=f-a.offset().top+n;o>w&&(o=w),o<0&&(o=0);var s=o/h;return a.attr("style","margin-top: "+-o+"px !important"),r.css({top:s}),!1})},this.show=function(e){if(k.reviewQustion&&s.parent().show(),c.find(".wpProQuiz_reviewDiv .wpProQuiz_button2").show(),!e){a.attr("style","margin-top: 0px !important"),r.css({top:0});var i=a.outerHeight(),t=s.height();d=t-r.height(),p=0,w=i-t,h=w/d,this.reset(),i>100&&r.show(),f=r.offset().top}},this.hide=function(){s.parent().hide()},this.toggle=function(){if(k.reviewQustion){s.parent().toggle(),u.removeClass("wpProQuiz_reviewQuestionTarget"),c.find(".wpProQuiz_reviewDiv .wpProQuiz_button2").hide(),a.attr("style","margin-top: 0px !important"),r.css({top:0});var e=a.outerHeight(),i=s.height();d=i-r.height(),p=0,w=e-i,h=w/d,e>100&&r.show(),f=r.offset().top}},this.reset=function(){for(var e=0,i=u.length;e<i;e++)m[e]={};u.removeClass("wpProQuiz_reviewQuestionTarget"),u.removeClass("wpProQuiz_reviewQuestionSolved"),u.removeClass("wpProQuiz_reviewQuestionReview")}},E=new n,A=function(i,t,n,o,s){null==s&&(s=!0);var r={},a={singleMulti:function(){var i=o.find(".wpProQuiz_questionInput");1==s&&o.find(".wpProQuiz_questionInput").attr("disabled","disabled"),jQuery(".wpProQuiz_questionListItem",o).each(function(t){var n=e(this),o=n.attr("data-pos");void 0!==o&&(r[o]=i.eq(t).is(":checked"))})},sort_answer:function(){var i=o.children();i.each(function(i,t){var n=e(this);r[i]=n.attr("data-pos")}),1==s&&o.sortable("destroy")},matrix_sort_answer:function(){var i=o.children();new Array;statistcAnswerData={0:-1},i.each(function(){var i=e(this),t=i.attr("data-pos"),n=i.find(".wpProQuiz_maxtrixSortCriterion"),o=n.children();o.length&&(statistcAnswerData[o.attr("data-pos")]=t),r=statistcAnswerData}),1==s&&n.find(".wpProQuiz_sortStringList, .wpProQuiz_maxtrixSortCriterion").sortable("destroy")},free_answer:function(){var e=o.children(),i=e.find(".wpProQuiz_questionInput").val();1==s&&e.find(".wpProQuiz_questionInput").attr("disabled","disabled"),r=i},cloze_answer:function(){r={},o.find(".wpProQuiz_cloze").each(function(i,t){var n=e(this),o=n.children(),a=o.eq(0),u=(o.eq(1),l.methode.cleanupCurlyQuotes(a.val()));r[i]=u,1==s&&a.attr("disabled","disabled")})},assessment_answer:function(){correct=!0;var i=o.find(".wpProQuiz_questionInput");1==s&&o.find(".wpProQuiz_questionInput").attr("disabled","disabled");var t=0;i.filter(":checked").each(function(){t+=parseInt(e(this).val())}),r=t},essay:function(){var e=n.find("ul.wpProQuiz_questionList").data("question_id");1==s&&o.find(".wpProQuiz_questionEssay").attr("disabled","disabled");var i=o.find(".wpProQuiz_questionEssay").val(),t=o.find("#uploadEssayFile_"+e).val();void 0!==i&&(r=i),void 0!==t&&(r=t)}};return a[i](),{response:r}},C=new function(){var i={isEmpty:function(i){return i=e.trim(i),!i||0===i.length}},t={TEXT:0,TEXTAREA:1,NUMBER:2,CHECKBOX:3,EMAIL:4,YES_NO:5,DATE:6,SELECT:7,RADIO:8};this.checkForm=function(){var n=!0;return c.find(".wpProQuiz_forms input, .wpProQuiz_forms textarea, .wpProQuiz_forms .wpProQuiz_formFields, .wpProQuiz_forms select").each(function(){var o=e(this),s=1==o.data("required"),r=o.data("type"),a=!0,u=e.trim(o.val());switch(r){case t.TEXT:case t.TEXTAREA:case t.SELECT:s&&(a=!i.isEmpty(u));break;case t.NUMBER:!s&&i.isEmpty(u)||(a=!i.isEmpty(u)&&!isNaN(u));break;case t.EMAIL:!s&&i.isEmpty(u)||(a=!i.isEmpty(u)&&new RegExp(/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/).test(u));break;case t.CHECKBOX:s&&(a=o.is(":checked"));break;case t.YES_NO:case t.RADIO:s&&(a=void 0!==o.find('input[type="radio"]:checked').val());break;case t.DATE:var d=0,c=0;o.find("select").each(function(){d++,c+=i.isEmpty(e(this).val())?0:1}),(s||c>0)&&(a=d==c)}a?o.siblings(".wpProQuiz_invalidate").hide():(n=!1,o.siblings(".wpProQuiz_invalidate").show())}),n},this.getFormData=function(){var i={};return c.find(".wpProQuiz_forms input, .wpProQuiz_forms textarea, .wpProQuiz_forms .wpProQuiz_formFields, .wpProQuiz_forms select").each(function(){var n=e(this),o=n.data("form_id"),s=n.data("type");switch(s){case t.TEXT:case t.TEXTAREA:case t.SELECT:case t.NUMBER:case t.EMAIL:i[o]=n.val();break;case t.CHECKBOX:i[o]=n.is(":checked")?1:0;break;case t.YES_NO:case t.RADIO:i[o]=n.find('input[type="radio"]:checked').val();break;case t.DATE:i[o]={day:n.find('select[name="wpProQuiz_field_'+o+'_day"]').val(),month:n.find('select[name="wpProQuiz_field_'+o+'_month"]').val(),year:n.find('select[name="wpProQuiz_field_'+o+'_year"]').val()}}}),i}},D=function(i){c.find(".wpProQuiz_questionList").each(function(){var t=e(this),n=t.data("question_id"),o=t.data("type"),s={};if("single"==o||"multiple"==o)t.find(".wpProQuiz_questionListItem").each(function(){s[e(this).attr("data-pos")]=+e(this).find(".wpProQuiz_questionInput").is(":checked")});else if("free_answer"==o)s[0]=t.find(".wpProQuiz_questionInput").val();else{if("sort_answer"==o)return!0;if("matrix_sort_answer"==o)return!0;if("cloze_answer"==o){var r=0;t.find(".wpProQuiz_cloze input").each(function(){s[r++]=e(this).val()})}else if("assessment_answer"==o)s[0]="",t.find(".wpProQuiz_questionInput:checked").each(function(){s[e(this).data("index")]=e(this).val()});else if("essay"==o)return}i[n].data=s})};l.methode={parseBitOptions:function(){if(p.bo){k.randomAnswer=1&p.bo,k.randomQuestion=2&p.bo,k.disabledAnswerMark=4&p.bo,k.checkBeforeStart=8&p.bo,k.preview=16&p.bo,k.isAddAutomatic=64&p.bo,k.reviewQustion=128&p.bo,k.quizSummeryHide=256&p.bo,k.skipButton=512&p.bo,k.autoStart=1024&p.bo,k.forcingQuestionSolve=2048&p.bo,k.hideQuestionPositionOverview=4096&p.bo,k.formActivated=8192&p.bo,k.maxShowQuestion=16384&p.bo,k.sortCategories=32768&p.bo;var e=32&p.bo;e&&null!=jQuery.support&&null!=jQuery.support.cors&&0==jQuery.support.cors&&(k.cors=e)}},setClozeStyle:function(){c.find(".wpProQuiz_cloze input").each(function(){for(var i=e(this),t="",n=i.data("wordlen"),o=0;o<n;o++)t+="w";var s=e(document.createElement("span")).css("visibility","hidden").text(t).appendTo(e("body")),r=s.width();s.remove(),i.width(r+5)})},parseTime:function(e){var i=parseInt(e%60),t=parseInt(e/60%60),n=parseInt(e/3600%24);return i=(i>9?"":"0")+i,t=(t>9?"":"0")+t,n=(n>9?"":"0")+n,n+":"+t+":"+i},cleanupCurlyQuotes:function(i){return i=i.replace(/\u2018/,"'"),i=i.replace(/\u2019/,"'"),i=i.replace(/\u201C/,'"'),i=i.replace(/\u201D/,'"'),e.trim(i)},resetMatrix:function(i){i.each(function(){var i=e(this),t=i.find(".wpProQuiz_sortStringList");i.find(".wpProQuiz_sortStringItem").each(function(){t.append(e(this))})})},marker:function(e,i){k.disabledAnswerMark||(i?e.addClass("wpProQuiz_answerCorrect"):e.addClass("wpProQuiz_answerIncorrect"))},startQuiz:function(i){if(x.loadLock)x.isQuizStart=1;else{if(x.isQuizStart=0,x.isLocked)return b.quizStartPage.hide(),void c.find(".wpProQuiz_lock").show();if(x.isPrerequisite)return b.quizStartPage.hide(),void c.find(".wpProQuiz_prerequisite").show();if(x.isUserStartLocked)return b.quizStartPage.hide(),void c.find(".wpProQuiz_startOnlyRegisteredUser").show();if(k.maxShowQuestion&&!i){if(p.formPos==T.START&&!C.checkForm())return;return b.quizStartPage.hide(),c.find(".wpProQuiz_loadQuiz").show(),void l.methode.loadQuizDataAjax(!0)}if(!k.formActivated||p.formPos!=T.START||C.checkForm()){switch(l.methode.loadQuizData(),k.randomQuestion&&l.methode.random(b.questionList),k.randomAnswer&&l.methode.random(c.find(S.questionList)),k.sortCategories&&l.methode.sortCategories(),l.methode.random(c.find(".wpProQuiz_sortStringList")),l.methode.random(c.find('.wpProQuiz_questionList[data-type="sort_answer"]')),c.find(".wpProQuiz_listItem").each(function(i,t){var n=e(this);n.find(".wpProQuiz_question_page span:eq(0)").text(i+1),n.find("> h5 span").text(i+1),n.find(".wpProQuiz_questionListItem").each(function(i,t){e(this).find("> span:not(.wpProQuiz_cloze)").text(i+1+". ")})}),b.next=c.find(S.next),p.mode){case 3:c.find('input[name="checkSingle"]').show();break;case 2:c.find(S.check).show(),!k.skipButton&&k.reviewQustion&&c.find(S.skip).show();break;case 1:c.find('input[name="back"]').slice(1).show();case 0:b.next.show()}(k.hideQuestionPositionOverview||3==p.mode)&&c.find(".wpProQuiz_question_page").hide();var n=b.next.last();v=n.val(),n.val(p.lbn);var o=b.questionList.children();if(b.listItems=c.find(".wpProQuiz_list > li"),3==p.mode)l.methode.showSinglePage(0);else{m=o.eq(0).show();var s=m.find(S.questionList).data("question_id");E.questionStart(s)}E.startQuiz(),c.find(".wpProQuiz_sortable").parents("ul").sortable({update:function(i,t){var n=e(this).parents(".wpProQuiz_listItem");c.trigger({type:"questionSolved",values:{item:n,index:n.index(),solved:!0}})}}).disableSelection(),c.find(".wpProQuiz_sortStringList, .wpProQuiz_maxtrixSortCriterion").sortable({connectWith:".wpProQuiz_maxtrixSortCriterion:not(:has(li)), .wpProQuiz_sortStringList",placeholder:"wpProQuiz_placehold",update:function(i,t){var n=e(this).parents(".wpProQuiz_listItem");c.trigger({type:"questionSolved",values:{item:n,index:n.index(),solved:!0}})}}).disableSelection(),_=[],L.start(),w=+new Date,h={comp:{points:0,correctQuestions:0,quizTime:0}},c.find(".wpProQuiz_questionList").each(function(){var i=e(this).data("question_id");h[i]={time:0}}),f={},e.each(t.catPoints,function(e,i){f[e]=0}),b.quizStartPage.hide(),c.find(".wpProQuiz_loadQuiz").hide(),b.quiz.show(),j.show(),l.methode.CookieInit(),3!=p.mode&&c.trigger({type:"changeQuestion",values:{item:m,index:m.index()}})}}},viewUserQuizStatistics:function(e){var i=jQuery(e).data("ref_id"),t=jQuery(e).data("quiz_id"),n={action:"wp_pro_quiz_admin_ajax",func:"statisticLoadUser",data:{quizId:t,userId:0,refId:i,avg:0}};jQuery("#wpProQuiz_user_overlay, #wpProQuiz_loadUserData").show();var o=jQuery("#wpProQuiz_user_content").hide();jQuery.ajax({type:"POST",url:WpProQuizGlobal.ajaxurl,dataType:"json",cache:!1,data:n,error:function(e,i,t){},success:function(e){void 0!==e.html&&(o.html(e.html),jQuery("#wpProQuiz_user_content").show(),jQuery("#wpProQuiz_loadUserData").hide(),o.find(".statistic_data").click(function(){return jQuery(this).parents("tr").next().toggle("fast"),!1}))}}),jQuery("#wpProQuiz_overlay_close").click(function(){jQuery("#wpProQuiz_user_overlay").hide()})},showSingleQuestion:function(e){var i=e?Math.ceil(e/p.qpp):1;this.showSinglePage(i)},showSinglePage:function(e){if($listItem=b.questionList.children().hide(),p.qpp){e=e?+e:1;var i=Math.ceil(c.find(".wpProQuiz_list > li").length/p.qpp);if(!(e>i)){var t=c.find(S.singlePageLeft).hide(),n=c.find(S.singlePageRight).hide(),o=c.find('input[name="checkSingle"]').hide();e>1&&t.val(t.data("text").replace(/%d/,e-1)).show(),e==i?o.show():n.val(n.data("text").replace(/%d/,e+1)).show(),Q=e;var s=p.qpp*(e-1);$listItem.slice(s,s+p.qpp).show(),l.methode.scrollTo(b.quiz)}}else $listItem.show()},nextQuestion:function(){l.methode.CookieProcessQuestionResponse(m),jQuery(".mejs-pause").trigger("click"),this.showQuestionObject(m.next())},prevQuestion:function(){this.showQuestionObject(m.prev())},showQuestion:function(e){var i=b.listItems.eq(e);if(3==p.mode||z)return p.qpp&&l.methode.showSingleQuestion(e+1),l.methode.scrollTo(i,1),void E.startQuiz();this.showQuestionObject(i)},showQuestionObject:function(i){if(!i.length&&k.forcingQuestionSolve&&k.quizSummeryHide&&k.reviewQustion){list=b.questionList.children(),null!=list&&list.each(function(){var i=e(this),t=i.find(S.questionList),n=(t.data("question_id"),p.json[t.data("question_id")]);"sort_answer"==n.type&&c.trigger({type:"questionSolved",values:{item:i,index:i.index(),solved:!0}})});for(var t=0,n=c.find(".wpProQuiz_listItem").length;t<n;t++)if(!_[t])return alert(WpProQuizGlobal.questionsNotSolved),!1}if(m.hide(),m=i.show(),l.methode.scrollTo(b.quiz),c.trigger({type:"changeQuestion",values:{item:m,index:m.index()}}),m.length){var o=m.find(S.questionList).data("question_id");E.questionStart(o)}else l.methode.showQuizSummary()},skipQuestion:function(){c.trigger({type:"skipQuestion",values:{item:m,index:m.index()}}),l.methode.nextQuestion()},reviewQuestion:function(){c.trigger({type:"reviewQuestion",values:{item:m,index:m.index()}})},uploadFile:function(i){var t=i.currentTarget.id.replace("uploadEssaySubmit_",""),n=e("#uploadEssay_"+t)[0].files[0];if(void 0!==n){var o=e("#_uploadEssay_nonce_"+t).val(),s=e("#uploadEssaySubmit_"+t);s.val("Uploading...");var r=new FormData;r.append("action","learndash_upload_essay"),r.append("nonce",o),r.append("question_id",t),r.append("course_id",p.course_id),r.append("essayUpload",n),e.ajax({method:"POST",type:"POST",url:WpProQuizGlobal.ajaxurl,data:r,cache:!1,contentType:!1,processData:!1,success:function(i){if(1==i.success&&void 0!==i.data.filelink){e("#uploadEssayFile_"+t).val(i.data.filelink),s.attr("disabled","disabled"),setTimeout(function(){s.val("Success")},1500);var n=e("#uploadEssayFile_"+t).parents(".wpProQuiz_listItem");c.trigger({type:"questionSolved",values:{item:n,index:n.index(),solved:!0}})}else s.removeAttr("disabled"),s.val("Failed. Try again.")}})}i.preventDefault()},showQuizSummary:function(){if(E.questionStop(),E.stopQuiz(),!k.quizSummeryHide&&k.reviewQustion){var i=c.find(".wpProQuiz_checkPage");i.find("ol:eq(0)").empty().append(c.find(".wpProQuiz_reviewQuestion ol li").clone().removeClass("wpProQuiz_reviewQuestionTarget")).children().click(function(t){i.hide(),b.quiz.show(),j.show(!0),l.methode.showQuestion(e(this).index())});for(var t=0,n=0,o=_.length;n<o;n++)_[n]&&t++;i.find("span:eq(0)").text(t),j.hide(),b.quiz.hide(),i.show(),l.methode.scrollTo(i)}else k.formActivated&&p.formPos==T.END?(j.hide(),b.quiz.hide(),l.methode.scrollTo(c.find(".wpProQuiz_infopage").show())):l.methode.finishQuiz()},finishQuiz:function(e){E.questionStop(),E.stopQuiz(),L.stop();var i=(+new Date-w)/1e3;i=p.timelimit&&i>p.timelimit?p.timelimit:i,P=i,c.find(".wpProQuiz_quiz_time span").text(l.methode.parseTime(i)),e&&b.results.find(".wpProQuiz_time_limit_expired").show(),l.methode.checkQuestion(b.questionList.children(),!0)},finishQuizEnd:function(){c.find(".wpProQuiz_correct_answer").text(h.comp.correctQuestions),h.comp.result=Math.round(h.comp.points/p.globalPoints*100*100)/100;var i=!1;if(e.each(h,function(){void 0!==this.graded_status&&"not_graded"==this.graded_status&&(i=!0)}),"undefined"!=typeof certificate_details&&null!=certificate_details.certificateLink&&""!=certificate_details.certificateLink&&h.comp.result>=100*certificate_details.certificate_threshold){var n=c.find(".wpProQuiz_certificate");1==i&&"undefined"!=typeof certificate_pending&&n.html(certificate_pending),n.show()}var o=c.find(".quiz_continue_link"),s=!1;jQuery(o).hasClass("show_quiz_continue_buttom_on_fail")&&(s=!0),void 0!==t.passingpercentage&&parseFloat(t.passingpercentage)>=0?h.comp.result>=t.passingpercentage||s?"undefined"!=typeof continue_details&&(c.find(".quiz_continue_link").html(continue_details),c.find(".quiz_continue_link").show()):c.find(".quiz_continue_link").hide():"undefined"!=typeof continue_details&&(c.find(".quiz_continue_link").html(continue_details),c.find(".quiz_continue_link").show()),$pointFields=c.find(".wpProQuiz_points span"),$gradedPointsFields=c.find(".wpProQuiz_graded_points span"),$pointFields.eq(0).text(h.comp.points),$pointFields.eq(1).text(p.globalPoints),$pointFields.eq(2).text(h.comp.result+"%"),$gradedQuestionCount=0,$gradedQuestionPoints=0,e.each(h,function(i,t){if(e.isNumeric(i)&&t.graded_id){var n=t.possiblePoints-t.points;n>0&&($gradedQuestionPoints+=n,$gradedQuestionCount++)}}),$gradedQuestionCount>0&&(e(".wpProQuiz_points").hide(),e(".wpProQuiz_graded_points").show(),$gradedPointsFields.eq(0).text(h.comp.points),$gradedPointsFields.eq(1).text(p.globalPoints),$gradedPointsFields.eq(2).text(h.comp.result+"%"),$gradedPointsFields.eq(3).text($gradedQuestionCount),$gradedPointsFields.eq(4).text($gradedQuestionPoints)),c.find(".wpProQuiz_resultsList > li").eq(l.methode.findResultIndex(h.comp.result)).show(),l.methode.setAverageResult(h.comp.result,!1),this.setCategoryOverview(),l.methode.sendCompletedQuiz(),k.isAddAutomatic&&I.isUser&&l.methode.addToplist(),j.hide(),c.find(".wpProQuiz_checkPage, .wpProQuiz_infopage").hide(),b.quiz.hide()},sending:function(e,i,t){b.sending.show();var n,o=b.sending.find(".sending_progress_bar");if(n=null==typeof e||null==e?parseInt(100*o.width()/o.offsetParent().width())+156:e,null==i)i=80;null==t&&(t=1),null!=g&&null!=typeof g&&clearInterval(g),g=setInterval(function(){var e=parseInt(100*o.width()/o.offsetParent().width());e>=i&&(clearInterval(g),e>=100&&setTimeout(l.methode.showResults(),2e3)),o.css("width",n+"%"),n+=t},300)},showResults:function(){b.sending.hide(),b.results.show(),l.methode.scrollTo(b.results)},setCategoryOverview:function(){h.comp.cats={},c.find(".wpProQuiz_catOverview li").each(function(){var i=e(this),t=i.data("category_id");if(void 0===p.catPoints[t])return i.hide(),!0;var n=Math.round(f[t]/p.catPoints[t]*100*100)/100;h.comp.cats[t]=n,i.find(".wpProQuiz_catPercent").text(n+"%"),i.show()})},questionSolved:function(e){_[e.values.index]=e.values.solved},sendCompletedQuiz:function(){if(!k.preview){D(h);var e=C.getFormData();jQuery.post(WpProQuizGlobal.ajaxurl,{action:"wp_pro_quiz_completed_quiz",course_id:p.course_id,lesson_id:p.lesson_id,topic_id:p.topic_id,quiz:p.quiz,quizId:p.quizId,results:JSON.stringify(h),timespent:P,forms:e,quiz_nonce:p.quiz_nonce}).success(function(e){l.methode.sending(null,100,15),l.methode.CookieDelete()})}},findResultIndex:function(e){for(var i=p.resultsGrade,t=-1,n=999999,o=0;o<i.length;o++){var s=i[o];e>=s&&e-s<n&&(n=e-s,t=o)}return t},showQustionList:function(){z=!z,b.toplistShowInButton.hide(),b.quiz.toggle(),c.find(".wpProQuiz_QuestionButton").hide(),b.questionList.children().show(),j.toggle(),c.find(".wpProQuiz_question_page").hide()},random:function(i){i.each(function(){var i=e(this).children().get().sort(function(){return Math.round(Math.random())-.5});e(i).appendTo(i[0].parentNode)})},sortCategories:function(){var i=e(".wpProQuiz_list").children().get().sort(function(i,t){var n=e(i).find(".wpProQuiz_questionList").data("question_id"),o=e(t).find(".wpProQuiz_questionList").data("question_id");return p.json[n].catId-p.json[o].catId});e(i).appendTo(i[0].parentNode)},restartQuiz:function(){b.results.hide(),b.questionList.children().hide(),b.toplistShowInButton.hide(),j.hide(),c.find(".wpProQuiz_questionInput, .wpProQuiz_cloze input").removeAttr("disabled").removeAttr("checked").css("background-color",""),c.find('.wpProQuiz_questionListItem input[type="text"]').val(""),c.find(".wpProQuiz_answerCorrect, .wpProQuiz_answerIncorrect").removeClass("wpProQuiz_answerCorrect wpProQuiz_answerIncorrect"),c.find(".wpProQuiz_listItem").data("check",!1),c.find("textarea.wpProQuiz_questionEssay").val(""),c.find("input.uploadEssayFile").val(""),c.find("input.wpProQuiz_upload_essay").val(""),c.find(".wpProQuiz_response").hide().children().hide(),l.methode.resetMatrix(c.find(".wpProQuiz_listItem")),c.find(".wpProQuiz_sortStringItem, .wpProQuiz_sortable").removeAttr("style"),c.find(".wpProQuiz_clozeCorrect, .wpProQuiz_QuestionButton, .wpProQuiz_resultsList > li").hide(),c.find('.wpProQuiz_question_page, input[name="tip"]').show(),c.find(".wpProQuiz_certificate").attr("style","display: none !important"),b.results.find(".wpProQuiz_time_limit_expired").hide(),b.next.last().val(v),z=!1,window.location.reload(!0)},showSpinner:function(){c.find(".wpProQuiz_spinner").show()},hideSpinner:function(){c.find(".wpProQuiz_spinner").hide()},checkQuestion:function(i,t){var n=null!=i,o={};i=null==i?m:i,i.each(function(){var i=e(this),t=i.index(),n=i.find(S.questionList),s=n.data("question_id"),r=p.json[n.data("question_id")],a=r.type;if(E.questionStop(),i.data("check"))return!0;"single"!=r.type&&"multiple"!=r.type||(a="singleMulti"),o[s]=A(a,r,i,n,!0),o[s].question_pro_id=r.id,o[s].question_post_id=r.question_post_id,l.methode.CookieSaveResponse(s,t,r.type,o[s])}),p.checkAnswers={list:i,responses:o,endCheck:t,finishQuiz:n},n?l.methode.sending(1,80,3):l.methode.showSpinner(),l.methode.ajax({action:"ld_adv_quiz_pro_ajax",func:"checkAnswers",data:{quizId:p.quizId,quiz:p.quiz,course_id:p.course_id,quiz_nonce:p.quiz_nonce,responses:JSON.stringify(o)}},function(i){l.methode.hideSpinner();var t=p.checkAnswers.list,n=(p.checkAnswers.responses,p.checkAnswers.r,p.checkAnswers.endCheck),o=p.checkAnswers.finishQuiz;t.each(function(){var t=e(this),o=t.find(S.questionList),s=o.data("question_id");if(t.data("check"))return!0;if(void 0!==i[s]){var r=i[s];data=p.json[o.data("question_id")],t.find(".wpProQuiz_response").show(),t.find(S.check).hide(),t.find(S.skip).hide(),t.find(S.next).show(),h[data.id].points=r.p,void 0!==r.p_nonce?h[data.id].p_nonce=r.p_nonce:h[data.id].p_nonce="",h[data.id].correct=Number(r.c),h[data.id].data=r.s,void 0!==r.a_nonce?h[data.id].a_nonce=r.a_nonce:h[data.id].a_nonce="",h[data.id].possiblePoints=r.e.possiblePoints,jQuery.isEmptyObject(h[data.id].data)&&(null==r.e.type||"sort_answer"!=r.e.type&&"matrix_sort_answer"!=r.e.type||(h[data.id].data=r.e.r)),void 0!==r.e.graded_id&&r.e.graded_id>0&&(h[data.id].graded_id=r.e.graded_id),void 0!==r.e.graded_status&&(h[data.id].graded_status=r.e.graded_status),h.comp.points+=r.p,t.find(".wpProQuiz_response").show(),t.find(S.check).hide(),t.find(S.skip).hide(),t.find(S.next).show(),jQuery.isEmptyObject(h[data.id].data)&&void 0!==r.e.type&&("sort_answer"!=r.e.type&&"matrix_sort_answer"!=r.e.type||void 0!==r.e.r&&(h[data.id].data=r.e.r),"essay"==r.e.type&&void 0!==r.e.graded_id&&(h[data.id].data={graded_id:r.e.graded_id})),f[data.catId]+=r.p,l.methode.markCorrectIncorrect(r,t,o),r.c?(void 0!==r.e.AnswerMessage&&(t.find(".wpProQuiz_correct").find(".wpProQuiz_AnswerMessage").html(r.e.AnswerMessage),t.find(".wpProQuiz_correct").trigger("learndash-quiz-answer-response-contentchanged")),t.find(".wpProQuiz_correct").show(),h.comp.correctQuestions+=1):(void 0!==r.e.AnswerMessage&&(t.find(".wpProQuiz_incorrect").find(".wpProQuiz_AnswerMessage").html(r.e.AnswerMessage),t.find(".wpProQuiz_incorrect").trigger("learndash-quiz-answer-response-contentchanged")),t.find(".wpProQuiz_incorrect").show()),t.find(".wpProQuiz_responsePoints").text(r.p),t.data("check",!0),n||c.trigger({type:"questionSolved",values:{item:t,index:t.index(),solved:!0}})}}),o&&l.methode.finishQuizEnd()})},markCorrectIncorrect:function(i,t,n){if(void 0!==i.e.c)switch(i.e.type){case"single":case"multiple":n.children().each(function(t){var n=e(this),o=n.attr("data-pos");i.e.c[o]?l.methode.marker(n,!0):!i.c&&i.e.r[o]&&l.methode.marker(n,!1)});break;case"free_answer":var o=n.children();i.c?l.methode.marker(o,!0):l.methode.marker(o,!1);break;case"cloze_answer":n.find(".wpProQuiz_cloze").each(function(t,n){var o=e(this),s=o.children(),r=s.eq(0),a=s.eq(1);l.methode.cleanupCurlyQuotes(r.val());i.s[t]?r.css("background-color","#B0DAB0"):(r.css("background-color","#FFBABA"),void 0!==i.e.c[t]&&(a.html("("+i.e.c[t].join()+")"),a.show())),r.attr("disabled","disabled")});break;case"sort_answer":var s=n.children();s.each(function(t,n){var o=e(this);i.e.c[t]==o.attr("data-pos")?l.methode.marker(o,!0):l.methode.marker(o,!1)}),s.children().css({"box-shadow":"0 0",cursor:"auto"});var r=new Array;jQuery.each(i.e.c,function(e,i){r[i]=e}),s.sort(function(i,t){return r[e(i).attr("data-pos")]>r[e(t).attr("data-pos")]?1:-1}),n.append(s);break;case"matrix_sort_answer":s=n.children();var a=new Array;statistcAnswerData={0:-1},s.each(function(){var t=e(this),n=(t.attr("data-pos"),t.find(".wpProQuiz_maxtrixSortCriterion")),o=n.children(),s=o.attr("data-pos");o.length&&i.e.c[s]==t.attr("data-pos")?l.methode.marker(t,!0):l.methode.marker(t,!1),a[s]=n}),l.methode.resetMatrix(t),t.find(".wpProQuiz_sortStringItem").each(function(){var i=a[e(this).attr("data-pos")];null!=i&&i.append(this)}).css({"box-shadow":"0 0",cursor:"auto"})}},showTip:function(){var i=e(this),t=i.siblings(".wpProQuiz_question").find(S.questionList).data("question_id");i.siblings(".wpProQuiz_tipp").toggle("fast"),h[t].tip=1,e(document).bind("mouseup.tipEvent",function(i){var t=c.find(".wpProQuiz_tipp"),n=c.find('input[name="tip"]');t.is(i.target)||0!=t.has(i.target).length||n.is(i.target)||(t.hide("fast"),e(document).unbind(".tipEvent"))})},ajax:function(i,t,n){n=n||"json",k.cors&&(jQuery.support.cors=!0),void 0===i.quiz&&(i.quiz=p.quiz),void 0===i.course_id&&(i.course_id=p.course_id),void 0===i.quiz_nonce&&(i.quiz_nonce=p.quiz_nonce),e.ajax({method:"POST",type:"POST",url:WpProQuizGlobal.ajaxurl,data:i,success:t,dataType:n}),k.cors&&(jQuery.support.cors=!1)},checkQuizLock:function(){x.loadLock=1,l.methode.ajax({action:"wp_pro_quiz_check_lock",quizId:p.quizId},function(e){null!=e.lock&&(x.isLocked=e.lock.is,e.lock.pre&&c.find('input[name="restartQuiz"]').hide()),null!=e.prerequisite&&(x.isPrerequisite=1,c.find(".wpProQuiz_prerequisite span").text(e.prerequisite)),null!=e.startUserLock&&(x.isUserStartLocked=e.startUserLock),x.loadLock=0,x.isQuizStart&&l.methode.startQuiz()})},loadQuizData:function(){l.methode.ajax({action:"wp_pro_quiz_load_quiz_data",quizId:p.quizId},function(e){e.toplist&&l.methode.handleToplistData(e.toplist),null!=e.averageResult&&l.methode.setAverageResult(e.averageResult,!0)})},setAverageResult:function(e,i){var t=c.find(".wpProQuiz_resultValue:eq("+(i?0:1)+") > * ");t.eq(1).text(e+"%"),t.eq(0).css("width",240*e/100+"px")},handleToplistData:function(e){var i=c.find(".wpProQuiz_addToplist"),t=i.find(".wpProQuiz_addBox").show().children("div");if(e.canAdd)if(i.show(),i.find(".wpProQuiz_addToplistMessage").hide(),i.find(".wpProQuiz_toplistButton").show(),I.token=e.token,I.isUser=0,e.userId)t.hide(),I.isUser=1,k.isAddAutomatic&&i.hide();else{t.show();var n=t.children().eq(1);e.captcha?(n.find('input[name="wpProQuiz_captchaPrefix"]').val(e.captcha.code),n.find(".wpProQuiz_captchaImg").attr("src",e.captcha.img),n.find('input[name="wpProQuiz_captcha"]').val(""),n.show()):n.hide()}else i.hide()},scrollTo:function(i,t){var n=i.offset().top-100;(t||(window.pageYOffset||document.body.scrollTop)>n)&&e("html,body").animate({scrollTop:n},300)},addToplist:function(){if(!k.preview){var e=c.find(".wpProQuiz_addToplistMessage").text(WpProQuizGlobal.loadData).show(),i=c.find(".wpProQuiz_addBox").hide();l.methode.ajax({action:"wp_pro_quiz_add_toplist",quizId:p.quizId,
quiz:p.quiz,token:I.token,name:i.find('input[name="wpProQuiz_toplistName"]').val(),email:i.find('input[name="wpProQuiz_toplistEmail"]').val(),captcha:i.find('input[name="wpProQuiz_captcha"]').val(),prefix:i.find('input[name="wpProQuiz_captchaPrefix"]').val(),results:h,timespent:P},function(t){e.text(t.text),t.clear?(i.hide(),l.methode.updateToplist()):i.show(),t.captcha&&(i.find(".wpProQuiz_captchaImg").attr("src",t.captcha.img),i.find('input[name="wpProQuiz_captchaPrefix"]').val(t.captcha.code),i.find('input[name="wpProQuiz_captcha"]').val(""))})}},updateToplist:function(){"function"==typeof wpProQuiz_fetchToplist&&wpProQuiz_fetchToplist()},registerSolved:function(){c.find('.wpProQuiz_questionInput[type="text"]').change(function(i){var t=e(this),n=t.parents(".wpProQuiz_listItem"),o=!1;""!=t.val()&&(o=!0),c.trigger({type:"questionSolved",values:{item:n,index:n.index(),solved:o}})}),c.find('.wpProQuiz_questionList[data-type="single"] .wpProQuiz_questionInput, .wpProQuiz_questionList[data-type="assessment_answer"] .wpProQuiz_questionInput').change(function(i){var t=e(this),n=t.parents(".wpProQuiz_listItem"),o=this.checked;c.trigger({type:"questionSolved",values:{item:n,index:n.index(),solved:o}})}),c.find(".wpProQuiz_cloze input").change(function(){var i=e(this),t=i.parents(".wpProQuiz_listItem"),n=!0;t.find(".wpProQuiz_cloze input").each(function(){if(""==e(this).val())return n=!1,!1}),c.trigger({type:"questionSolved",values:{item:t,index:t.index(),solved:n}})}),c.find('.wpProQuiz_questionList[data-type="multiple"] .wpProQuiz_questionInput').change(function(i){var t=e(this),n=t.parents(".wpProQuiz_listItem"),o=0;n.find('.wpProQuiz_questionList[data-type="multiple"] .wpProQuiz_questionInput').each(function(e){this.checked&&o++}),c.trigger({type:"questionSolved",values:{item:n,index:n.index(),solved:!!o}})}),c.find('.wpProQuiz_questionList[data-type="essay"] textarea.wpProQuiz_questionEssay').change(function(i){var t=e(this),n=t.parents(".wpProQuiz_listItem"),o=!1;""!=t.val()&&(o=!0),c.trigger({type:"questionSolved",values:{item:n,index:n.index(),solved:o}})})},loadQuizDataAjax:function(i){l.methode.ajax({action:"wp_pro_quiz_admin_ajax",func:"quizLoadData",data:{quizId:p.quizId,quiz:p.quiz,quiz_nonce:p.quiz_nonce}},function(t){p.globalPoints=t.globalPoints,p.catPoints=t.catPoints,p.json=t.json,b.quiz.remove(),c.find(".wpProQuiz_quizAnker").after(t.content),e("table.wpProQuiz_toplistTable caption span.wpProQuiz_max_points").html(p.globalPoints),b={back:c.find('input[name="back"]'),next:c.find(S.next),quiz:c.find(".wpProQuiz_quiz"),questionList:c.find(".wpProQuiz_list"),results:c.find(".wpProQuiz_results"),sending:c.find(".wpProQuiz_sending"),quizStartPage:c.find(".wpProQuiz_text"),timelimit:c.find(".wpProQuiz_time_limit"),toplistShowInButton:c.find(".wpProQuiz_toplistShowInButton"),listItems:e()},l.methode.initQuiz(),i&&l.methode.startQuiz(!0);var n=t.content,o=n.search("wp-audio-shortcode"),s=n.search("wp-video-shortcode");"-1"==o&&"-1"==s||(e.getScript(t.site_url+"/wp-includes/js/mediaelement/mediaelement-and-player.min.js"),e.getScript(t.site_url+"/wp-includes/js/mediaelement/wp-mediaelement.js"),e("<link/>",{rel:"stylesheet",type:"text/css",href:t.site_url+"/wp-includes/js/mediaelement/mediaelementplayer.min.css"}).appendTo("head"))})},nextQuestionClicked:function(){var e=m.find(S.questionList),i=p.json[e.data("question_id")];if("sort_answer"==i.type){var t=m.index();void 0===_[t]&&c.trigger({type:"questionSolved",values:{item:m,index:t,solved:!0}})}if(k.forcingQuestionSolve&&!_[m.index()]&&(k.quizSummeryHide||!k.reviewQustion))return alert(WpProQuizGlobal.questionNotSolved),!1;l.methode.nextQuestion()},initQuiz:function(){l.methode.setClozeStyle(),l.methode.registerSolved(),b.next.click(l.methode.nextQuestionClicked),b.back.click(function(){l.methode.prevQuestion()}),c.find(S.check).click(function(){if(k.forcingQuestionSolve&&!_[m.index()]&&(k.quizSummeryHide||!k.reviewQustion))return alert(WpProQuizGlobal.questionNotSolved),!1;l.methode.checkQuestion()}),c.find('input[name="checkSingle"]').click(function(){if(list=b.questionList.children(),null!=list&&list.each(function(){var i=e(this),t=i.find(S.questionList),n=(t.data("question_id"),p.json[t.data("question_id")]);"sort_answer"==n.type&&c.trigger({type:"questionSolved",values:{item:i,index:i.index(),solved:!0}})}),k.forcingQuestionSolve&&(k.quizSummeryHide||!k.reviewQustion))for(var i=0,t=c.find(".wpProQuiz_listItem").length;i<t;i++)if(!_[i])return alert(WpProQuizGlobal.questionsNotSolved),!1;l.methode.showQuizSummary()}),c.find('input[name="tip"]').click(l.methode.showTip),c.find('input[name="skip"]').click(l.methode.skipQuestion),c.find('input[name="wpProQuiz_pageLeft"]').click(function(){l.methode.showSinglePage(Q-1)}),c.find('input[name="wpProQuiz_pageRight"]').click(function(){l.methode.showSinglePage(Q+1)}),c.find('input[id^="uploadEssaySubmit"]').click(l.methode.uploadFile),c.trigger("learndash-quiz-init")},CookieInit:function(){0!=p.timelimitcookie&&(q="ld_"+p.quizId+"_quiz_responses",y=jQuery.cookie(q),y=""==y||null==y?{}:JSON.parse(y),l.methode.CookieSetResponses(),l.methode.CookieResponseTimer())},CookieDelete:function(){0!=p.timelimitcookie&&(q="ld_"+p.quizId+"_quiz_responses",jQuery.cookie(q,""))},CookieProcessQuestionResponse:function(i){null!=i&&i.each(function(){var i=e(this),t=i.index(),n=i.find(S.questionList),o=n.data("question_id"),s=p.json[n.data("question_id")],r=s.type;"single"!=s.type&&"multiple"!=s.type||(r="singleMulti");var a=A(r,s,i,n,!1);l.methode.CookieSaveResponse(o,t,s.type,a)})},CookieSaveResponse:function(e,i,t,n){if(0!=p.timelimitcookie){y[e]={index:i,value:n.response,type:t};var o=new Date;o.setTime(o.getTime()+1e3*p.timelimitcookie),jQuery.cookie(q,JSON.stringify(y),{expires:o})}},CookieResponseTimer:function(){0!=p.timelimitcookie&&c.bind("questionSolved",function(e){l.methode.CookieProcessQuestionResponse(e.values.item)})},CookieSetResponses:function(){if(0!=p.timelimitcookie&&null!=y&&Object.keys(y).length){var i=b.questionList.children();i.each(function(){var i=e(this),t=i.find(S.questionList),n=t.data("question_id");if(null!=y[n]){var s=y[n],r=p.json[t.data("question_id")];r.type===s.type&&o(r,s.value,i,t)}})}}},l.preInit=function(){l.methode.parseBitOptions(),j.init(),c.find('input[name="startQuiz"]').click(function(){return l.methode.startQuiz(),!1}),c.find('input[name="viewUserQuizStatistics"]').click(function(){return l.methode.viewUserQuizStatistics(this),!1}),k.checkBeforeStart&&!k.preview&&l.methode.checkQuizLock(),c.find('input[name="reShowQuestion"]').click(function(){l.methode.showQustionList()}),c.find('input[name="restartQuiz"]').click(function(){l.methode.restartQuiz()}),c.find('input[name="review"]').click(l.methode.reviewQuestion),c.find('input[name="wpProQuiz_toplistAdd"]').click(l.methode.addToplist),c.find('input[name="quizSummary"]').click(l.methode.showQuizSummary),c.find('input[name="endQuizSummary"]').click(function(){if(k.forcingQuestionSolve){list=b.questionList.children(),null!=list&&list.each(function(){var i=e(this),t=i.find(S.questionList),n=(t.data("question_id"),p.json[t.data("question_id")]);if("sort_answer"==n.type){var o=i.index();void 0===_[o]&&c.trigger({type:"questionSolved",values:{item:i,index:o,solved:!0}})}});for(var i=0,t=c.find(".wpProQuiz_listItem").length;i<t;i++)if(!_[i])return alert(WpProQuizGlobal.questionsNotSolved),!1}k.formActivated&&p.formPos==T.END&&!C.checkForm()||l.methode.finishQuiz()}),c.find('input[name="endInfopage"]').click(function(){C.checkForm()&&l.methode.finishQuiz()}),c.find('input[name="showToplist"]').click(function(){b.quiz.hide(),b.toplistShowInButton.toggle()}),c.bind("questionSolved",l.methode.questionSolved),k.maxShowQuestion||l.methode.initQuiz(),k.autoStart&&l.methode.startQuiz()},l.preInit()},e.fn.wpProQuizFront=function(i){return this.each(function(){null==e(this).data("wpProQuizFront")&&e(this).data("wpProQuizFront",new e.wpProQuizFront(this,i))})}})(jQuery);